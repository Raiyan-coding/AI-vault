<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vault</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap');
    :root { --bg:#0a0a0a;--card-bg:rgba(255,255,255,0.05);--accent:#00e5ff;--text:#e0e0e0;--shadow:rgba(0,0,0,0.6);--radius:1rem;--transition:0.3s ease;--icon-size:48px;--card-size:120px; }
    *{box-sizing:border-box;margin:0;padding:0;font-family:'Poppins',sans-serif;}
    body{color:var(--text);min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:3rem 2rem;position:relative;overflow-x:hidden;transition:background 1s ease;}
    h1{font-size:2.5rem;margin-bottom:2rem;color:var(--accent);}
    .card{position:relative;background:var(--card-bg);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.1);border-radius:var(--radius);box-shadow:0 8px 16px var(--shadow);display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:transform var(--transition),box-shadow var(--transition),border-color var(--transition);overflow:hidden;width:var(--card-size);height:var(--card-size);}
    .card:hover{transform:translateY(-4px) scale(1.02);box-shadow:0 12px 24px var(--shadow);border-color:var(--accent);}
    .card img{width:var(--icon-size);height:var(--icon-size);margin-bottom:0.5rem;border-radius:0.25rem;background:#fff;}
    .card span{font-size:0.75rem;text-align:center;color:var(--text);padding:0 0.25rem;word-break:break-word;}
    .card .actions{position:absolute;top:5px;right:5px;display:flex;gap:5px;opacity:0;transition:opacity 0.2s;}
    .card:hover .actions{opacity:1;}
    .actions button{background:rgba(0,0,0,0.5);border:none;color:var(--accent);padding:2px 4px;border-radius:3px;cursor:pointer;font-size:0.75rem;}
    #add-topic-area,#topics,#back-btn,#tools-area,#add-area{z-index:1;}
    #add-topic-area{display:flex;gap:0.5rem;margin-bottom:2rem;}
    #add-topic-area input,#add-area input{flex:1;padding:0.75rem;background:rgba(255,255,255,0.1);border:1px solid #333;border-radius:0.5rem;color:var(--text);font-size:1rem;}
    #add-topic-area button,#add-area button{padding:0.75rem 1rem;background:var(--accent);border:none;border-radius:0.5rem;font-size:1rem;color:var(--bg);cursor:pointer;transition:background var(--transition),transform var(--transition);}
    #add-topic-area button:hover,#add-area button:hover{background:#4bc0c8;transform:scale(1.02);}
    #topics,#tools-area{display:grid;grid-template-columns:repeat(auto-fit,minmax(var(--card-size),1fr));gap:1.5rem;width:100%;max-width:1000px;}
    #back-btn{display:none;margin-bottom:1rem;align-self:flex-start;background:none;border:none;color:var(--accent);font-size:1rem;cursor:pointer;text-decoration:underline;}
    #add-area{display:none;margin-top:2rem;width:100%;max-width:600px;}
  </style>
</head>
<body>
  <script>
    // On load, pick random gradient from preset palettes
    (function() {
      const palettes = [
        ['#004e92','#000428'], // blue to dark
        ['#8e2de2','#4a00e0'], // purple
        ['#ff416c','#ff4b2b'], // red
        ['#1f4037','#99f2c8'], // greenish
        ['#4158D0','#C850C0'], // violet
        ['#11998e','#38ef7d'], // teal
      ];
      const pair = palettes[Math.floor(Math.random()*palettes.length)];
      document.body.style.background = `radial-gradient(circle at 20% 30%, ${pair[0]}33, transparent 60%), radial-gradient(circle at 80% 80%, ${pair[1]}33, transparent 60%), var(--bg)`;
    })();
  </script>
  <h1>Vault</h1>
  <div id="add-topic-area">
    <input type="text" id="new-topic" placeholder="New Topic Name" />
    <button id="add-topic-btn">Add Topic</button>
  </div>
  <div id="topics"></div>
  <button id="back-btn">← Back to Topics</button>
  <div id="tools-area"></div>
  <div id="add-area">
    <input type="text" id="tool-name" placeholder="Tool Name" />
    <input type="url" id="tool-url" placeholder="https://example.com" />
    <button id="add-btn">Add Tool</button>
  </div>
  <script>
    // Backspace reloads page when not in input
    document.addEventListener('keydown', e => {
      if (e.key === 'Backspace') {
        const tag = e.target.tagName.toLowerCase();
        const type = e.target.type ? e.target.type.toLowerCase() : '';
        const isEditable = (tag === 'input' && (type === 'text' || type === 'url')) || tag === 'textarea';
        if (!isEditable) {
          e.preventDefault(); window.location.reload();
        }
      }
    });
    const STORAGE_KEY='vaultData'; let data=JSON.parse(localStorage.getItem(STORAGE_KEY)||'[]');
    if(!data.some(d=>d.topic==='AI vault')){
      const defaultTools=[['chatgpt','https://chat.openai.com'],['Gemini','https://gemini.google.com'],['Copilot','https://github.com/features/copilot'],['Perplexity','https://www.perplexity.ai'],['dende.ai','https://www.dende.ai'],['notebook','https://notebook.ai'],['bolt.new','https://bolt.new'],['heygen','https://heygen.com'],['runwayml','https://runwayml.com'],['hailuoai.video','https://hailuoai.video'],['klingai','https://kling.ai'],['lensgo','https://lensgo.ai'],['getcartwheel','https://getcartwheel.com'],['google ai studio','https://studio.google.ai'],['character ai','https://beta.character.ai'],['jules (programmer)','https://jules.ai']];
      defaultTools.forEach(([n,u])=>data.push({topic:'AI vault',name:n,url:u})); save();
    }
    const newTopicInput=document.getElementById('new-topic'), addTopicBtn=document.getElementById('add-topic-btn');
    const topicsDiv=document.getElementById('topics'), backBtn=document.getElementById('back-btn');
    const toolsArea=document.getElementById('tools-area'), addArea=document.getElementById('add-area');
    const nameInput=document.getElementById('tool-name'), urlInput=document.getElementById('tool-url'), addBtn=document.getElementById('add-btn');
    let currentTopic=null;
    const save=()=>localStorage.setItem(STORAGE_KEY,JSON.stringify(data));
    const getTopics=()=>[...new Set(data.map(d=>d.topic))];
    function renderTopics(){ topicsDiv.innerHTML=''; getTopics().forEach(t=>{ const card=document.createElement('div'); card.className='card'; const span=document.createElement('span'); span.textContent=t; card.append(span);
        const act=document.createElement('div'); act.className='actions';
        const edit=document.createElement('button'); edit.textContent='✎'; edit.onclick=e=>{ e.stopPropagation(); const newName=prompt('Rename topic',t); if(newName){ data.filter(d=>d.topic===t).forEach(d=>d.topic=newName); save(); renderTopics(); }};
        const del=document.createElement('button'); del.textContent='✕'; del.onclick=e=>{ e.stopPropagation(); if(confirm(`Delete topic "${t}"?`)){ data=data.filter(d=>d.topic!==t); save(); renderTopics(); }};
        act.append(edit,del); card.append(act);
        card.onclick=()=>enterTopic(t); topicsDiv.append(card); }); }
    addTopicBtn.onclick=()=>{ const t=newTopicInput.value.trim(); if(t&&!getTopics().includes(t)){ data.push({topic:t}); save(); newTopicInput.value=''; renderTopics(); }};
    function enterTopic(t){ currentTopic=t; document.getElementById('add-topic-area').style.display='none'; topicsDiv.style.display='none'; backBtn.style.display='block'; toolsArea.style.display='grid'; addArea.style.display='block'; renderTools(); }
    backBtn.onclick=()=>{ currentTopic=null; backBtn.style.display='none'; toolsArea.style.display='none'; addArea.style.display='none'; document.getElementById('add-topic-area').style.display='flex'; topicsDiv.style.display='grid'; };
    function renderTools(){ toolsArea.innerHTML=''; const tools=data.filter(d=>d.topic===currentTopic&&d.name); tools.forEach(tool=>{ const card=document.createElement('div'); card.className='card'; const img=document.createElement('img'); try{ img.src=`https://www.google.com/s2/favicons?domain=${new URL(tool.url).hostname}&sz=64`; }catch{}; const span=document.createElement('span'); span.textContent=tool.name; card.append(img,span);
        const act=document.createElement('div'); act.className='actions';
        const edit=document.createElement('button'); edit.textContent='✎'; edit.onclick=e=>{ e.stopPropagation(); const nn=prompt('Edit name',tool.name); const uu=prompt('Edit URL',tool.url); if(nn&&uu){ tool.name=nn; tool.url=uu; save(); renderTools(); }};
        const del=document.createElement('button'); del.textContent='✕'; del.onclick=e=>{ e.stopPropagation(); if(confirm(`Delete tool "${tool.name}"?`)){ data=data.filter(d=>!(d.topic===currentTopic&&d.name===tool.name&&d.url===tool.url)); save(); renderTools(); }};
        act.append(edit,del); card.append(act);
        card.onclick=()=>window.open(tool.url,'_blank'); toolsArea.append(card); }); if(!tools.length) toolsArea.innerHTML='<p>No tools yet, add one below!</p>'; }
    renderTopics(); toolsArea.style.display='none'; addArea.style.display='none';
  </script>
</body>
</html>
